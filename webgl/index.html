<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>WebGL</title>

    <meta name="description" content="A presentation about WebGL (in Icelandic)">
    <meta name="author" content="Eirikur Nilsson and Aegir Thorsteinsson">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="../reveal.js/css/reveal.min.css">
    <link rel="stylesheet" href="../reveal.js/css/theme/night.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="../reveal.js/lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
      document.write( '<link rel="stylesheet" href="../reveal.js/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>

    <!--[if lt IE 9]>
    <script src="../reveal.js/lib/js/html5shiv.js"></script>
    <![endif]-->

    <style>
      .reveal .state-background {
        -webkit-transition: none;
      }

      /*********************************************
       * OTHER STATES
       *********************************************/

      .fullscreen .state-background {
        width: 100%;
        height: 100%;
      }

      .fullscreen .reveal .slides {
        margin: 0px;
        width: 100% !important;
        height: 100% !important;
        max-width: 100%;
        left: 0px;
        right: 0px;
        top:0px;
        bottom: 0px;
      }

      .fullscreen .reveal .slides > section {
        position: absolute;
        width: 100%;
        height: 100%;
        min-height: 100%;
        text-align: left;
        left: 0px;
        right: 0px;
        top: 0px !important;
        bottom: 0px;
        margin:0px;
        padding:20px;
        padding-top: 40px;
      }

      .noborder {
        border: none !important;
        box-shadow: none !important;
        background: none;
      }

      /* Pretty print */
      .reveal .prettyprint {
        background: #fff;
        padding: .5em;
      }

      .prettyprint .str, /* string content */
      .prettyprint .atv { /* a markup attribute value */
        color: rgb(0, 138, 53); 
      }  
      .prettyprint .kwd, /* a keyword */
      .prettyprint .tag { /* a markup tag name */
        color: rgb(0, 102, 204);
      }
      .prettyprint .com { /* a comment */
        color: rgb(127, 127, 127); 
        font-style: italic; 
      }  
      .prettyprint .lit { /* a literal value */
        color: rgb(127, 0, 0);
      }  
      .prettyprint .pun, /* punctuation, lisp open bracket, lisp close bracket */
      .prettyprint .opn, 
      .prettyprint .clo { 
        color: rgb(127, 127, 127); 
      }
      .prettyprint .typ, /* a type name */
      .prettyprint .atn, /* a markup attribute name */ 
      .prettyprint .dec, 
      .prettyprint .var { /* a declaration; a variable name */
        color: rgb(127, 0, 127);
      }
    </style>
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">

        <section>
          <h1>WebGL</h1>
          <p>
            <small><a href="http://twitter.com/thorsteinsson">@thorsteinsson</a></small>
          </p>
        </section>

        <section>
          <h2>What is WebGL?</h2>
          <ul>
            <li>JavaScript meets the GPU</li>
            <li>Fast programmable drawing</li>
            <li>OpenGL ES 2.0 for HTML5 Canvas</li>
          </ul>
        </section>

        <section>
          <h2>What is OpenGL ES 2.0?</h2>
          <ul>
            <li>OpenGL for Embedded Systems</li>
            <li>Subset of desktop OpenGL</li>
            <li>Used for 3D games on mobile</li>
          </ul>
        </section>

        <section>
          <h2>Vertices &amp; Primitives</h2>
          <img src="images/opengles_primitives.png"/>
        </section>

        <section>
          <h2>Matrices</h2>
          <p>Used to represent transformations (translation, rotation, scaling)</p>
          <img src="images/matrices.png"/>
        </section>

        <section>
          <h2>Textures</h2>
          <p>Just an image that you map to a set of vertices</p>
          <img src="images/textures.png"/>
        </section>

        <section>
          <h2>Shaders</h2>
          <p>Programs that run per-vertex or per-fragment on the GPU.</p>
          <a href="https://www.shadertoy.com/">Shadertoy</a>
        </section>

        <section>
          <h2>Graphics pipeline</h2>
          <img src="images/pipeline1.png"/>
        </section>

        <section>
          <img src="images/pipeline2.png"/>
        </section>

        <section>
          <img src="images/pipeline3.png"/>
        </section>

        <section>
          <iframe src="http://gdd11-webgl.appspot.com/three/three_3.html" width="1200" height="600"></iframe>
        </section>

        <section>
          <iframe src="http://gdd11-webgl.appspot.com/three/three_6.html" width="1200" height="600"></iframe>
        </section>

        <section>
          <h3>Browser support</h3>
          <p>Chrome 9+</p>
          <p>Firefox 4+</p>
          <p>Safari 5.1+</p>
          <p>Opera 12+</p>
          <p>IE 11, Chrome Frame</p>
          <p>IEWebGL, cWebGL</p>
        </section>

        <section>
          <h2>Three.js</h2>
        </section>

        <section>
          <h2>Three.js is a JS 3D Engine</h2>
          <ul>
            <li><a href="https://github.com/mrdoob/three.js/">github.com/mrdoob/three.js</a></li>
            <li>Lightweight</li>
            <li>Easy to use</li>
            <li>WebGL renderer</li>
            <li>Also has Canvas and SVG renderers</li>
          </ul>
        </section>

        <section>
          <h3>Renderer</h3>
    <p>Create a WebGLRenderer</p>
    <pre class="prettyprint"><span class="pln">      </span><span class="kwd">var</span><span class="pln"> renderer </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">WebGLRenderer</span><span class="pun">({</span><span class="pln">antialias</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">});</span><span class="pln">
      renderer</span><span class="pun">.</span><span class="pln">setSize</span><span class="pun">(</span><span class="pln">document</span><span class="pun">.</span><span class="pln">body</span><span class="pun">.</span><span class="pln">clientWidth</span><span class="pun">,</span><span class="pln"> 
                       document</span><span class="pun">.</span><span class="pln">body</span><span class="pun">.</span><span class="pln">clientHeight</span><span class="pun">);</span></pre>
    <p>Plug it in</p>
    <pre class="prettyprint"><span class="pln">      document</span><span class="pun">.</span><span class="pln">body</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="pln">renderer</span><span class="pun">.</span><span class="pln">domElement</span><span class="pun">);</span></pre>
    <p>And make it pretty</p>
    <pre class="prettyprint"><span class="pln">      renderer</span><span class="pun">.</span><span class="pln">setClearColorHex</span><span class="pun">(</span><span class="lit">0xEEEEEE</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0</span><span class="pun">);</span><span class="pln">
      renderer</span><span class="pun">.</span><span class="pln">clear</span><span class="pun">();</span></pre>
        </section>

        <section>
          <h3>Wow!</h3>
          <iframe src="http://gdd11-webgl.appspot.com/three/three_1.html" width="1200" height="600"></iframe>
        </section>

        <section>
    <div>
    <p>Create a Camera</p>
    <pre class="prettyprint"><span class="com">// new THREE.PerspectiveCamera(FOV, viewAspectRatio, zNear, zFar);</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> camera </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">PerspectiveCamera</span><span class="pun">(</span><span class="lit">45</span><span class="pun">,</span><span class="pln"> width</span><span class="pun">/</span><span class="pln">height</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10000</span><span class="pun">);</span><span class="pln">
camera</span><span class="pun">.</span><span class="pln">position</span><span class="pun">.</span><span class="pln">z </span><span class="pun">=</span><span class="pln"> </span><span class="lit">300</span><span class="pun">;</span></pre>
    <p>Make a Scene with a Cube</p>
    <pre class="prettyprint"><span class="kwd">var</span><span class="pln"> scene </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">Scene</span><span class="pun">();</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> cube </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">Mesh</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">CubeGeometry</span><span class="pun">(</span><span class="lit">50</span><span class="pun">,</span><span class="lit">50</span><span class="pun">,</span><span class="lit">50</span><span class="pun">),</span><span class="pln">
               </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">MeshBasicMaterial</span><span class="pun">({</span><span class="pln">color</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0x000000</span><span class="pun">}));</span><span class="pln">
scene</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">cube</span><span class="pun">);</span></pre>
    <p>And render the Scene from the Camera</p>
    <pre class="prettyprint"><span class="pln">renderer</span><span class="pun">.</span><span class="pln">render</span><span class="pun">(</span><span class="pln">scene</span><span class="pun">,</span><span class="pln"> camera</span><span class="pun">);</span></pre>
    </div>
        </section>

        <section>
          <iframe src="http://gdd11-webgl.appspot.com/three/three_2.html" width="1200" height="600"></iframe>
        </section>

        <section>
          <h2>Animation</h2>
        </section>

        <section>
          <h3>Can we make it move?</h3>
    <p>Yes we can!</p>
    <pre class="prettyprint"><span class="pln">      </span><span class="kwd">function</span><span class="pln"> animate</span><span class="pun">(</span><span class="pln">t</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">// spin the camera in a circle</span><span class="pln">
        camera</span><span class="pun">.</span><span class="pln">position</span><span class="pun">.</span><span class="pln">x </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">sin</span><span class="pun">(</span><span class="pln">t</span><span class="pun">/</span><span class="lit">1000</span><span class="pun">)*</span><span class="lit">300</span><span class="pun">;</span><span class="pln">
        camera</span><span class="pun">.</span><span class="pln">position</span><span class="pun">.</span><span class="pln">y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">150</span><span class="pun">;</span><span class="pln">
        camera</span><span class="pun">.</span><span class="pln">position</span><span class="pun">.</span><span class="pln">z </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">cos</span><span class="pun">(</span><span class="pln">t</span><span class="pun">/</span><span class="lit">1000</span><span class="pun">)*</span><span class="lit">300</span><span class="pun">;</span><span class="pln">
        </span><span class="com">// you need to update lookAt on every frame</span><span class="pln">
        camera</span><span class="pun">.</span><span class="pln">lookAt</span><span class="pun">(</span><span class="pln">scene</span><span class="pun">.</span><span class="pln">position</span><span class="pun">);</span><span class="pln">
        </span><span class="com">// renderer automatically clears unless autoClear = false</span><span class="pln">
        renderer</span><span class="pun">.</span><span class="pln">render</span><span class="pun">(</span><span class="pln">scene</span><span class="pun">,</span><span class="pln"> camera</span><span class="pun">);</span><span class="pln">
        window</span><span class="pun">.</span><span class="pln">requestAnimationFrame</span><span class="pun">(</span><span class="pln">animate</span><span class="pun">,</span><span class="pln"> renderer</span><span class="pun">.</span><span class="pln">domElement</span><span class="pun">);</span><span class="pln">
      </span><span class="pun">};</span><span class="pln">
      animate</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">().</span><span class="pln">getTime</span><span class="pun">());</span><span class="pln">
    </span></pre>
        </section>

        <section>
          <iframe src="http://gdd11-webgl.appspot.com/three/three_3.html" width="1200" height="600"></iframe>
        </section>

        <section>
          <h2>Lighting</h2>
        </section>

        <section>
          <h3>Lights</h3>
    <p>Let's create a Light</p>
    <pre class="prettyprint"><span class="pln">      </span><span class="kwd">var</span><span class="pln"> light </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">SpotLight</span><span class="pun">();</span><span class="pln">
      light</span><span class="pun">.</span><span class="pln">position</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="pln"> </span><span class="lit">170</span><span class="pun">,</span><span class="pln"> </span><span class="lit">330</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">160</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
      scene</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">light</span><span class="pun">);</span></pre>
    <p>And a lit cube</p>
    <pre class="prettyprint"><span class="pln">      </span><span class="kwd">var</span><span class="pln"> litCube </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">Mesh</span><span class="pun">(</span><span class="pln">
        </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">CubeGeometry</span><span class="pun">(</span><span class="lit">50</span><span class="pun">,</span><span class="pln"> </span><span class="lit">50</span><span class="pun">,</span><span class="pln"> </span><span class="lit">50</span><span class="pun">),</span><span class="pln">
        </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">MeshLambertMaterial</span><span class="pun">({</span><span class="pln">color</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0xFFFFFF</span><span class="pun">}));</span><span class="pln">
      litCube</span><span class="pun">.</span><span class="pln">position</span><span class="pun">.</span><span class="pln">y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">50</span><span class="pun">;</span><span class="pln">
      scene</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">litCube</span><span class="pun">);</span></pre>
        </section>

        <section>
          <h3>There we go!</h3>
          <iframe src="http://gdd11-webgl.appspot.com/three/three_4.html" width="1200" height="600"></iframe>
        </section>

        <section>
          <h3>Shadows</h3>
    <p>Three.js has shadow maps.</p>
    <p>You need to enable them per-light and per-object.</p>
    <p>The shadows only work on SpotLights.</p>
    <pre class="prettyprint"><span class="pln">      </span><span class="com">// enable shadows on the renderer</span><span class="pln">
      renderer</span><span class="pun">.</span><span class="pln">shadowMapEnabled </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">

      </span><span class="com">// enable shadows for a light</span><span class="pln">
      light</span><span class="pun">.</span><span class="pln">castShadow </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">

      </span><span class="com">// enable shadows for an object</span><span class="pln">
      litCube</span><span class="pun">.</span><span class="pln">castShadow </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
      litCube</span><span class="pun">.</span><span class="pln">receiveShadow </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></pre>
        </section>

        <section>
          <h3>Added interest</h3>
    <p>Let's add a ground plane</p>
    <pre class="prettyprint"><span class="pln">  </span><span class="kwd">var</span><span class="pln"> planeGeo </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">PlaneGeometry</span><span class="pun">(</span><span class="lit">400</span><span class="pun">,</span><span class="pln"> </span><span class="lit">200</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">);</span><span class="pln">
  </span><span class="kwd">var</span><span class="pln"> planeMat </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">MeshLambertMaterial</span><span class="pun">({</span><span class="pln">color</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0xFFFFFF</span><span class="pun">});</span><span class="pln">
  </span><span class="kwd">var</span><span class="pln"> plane </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">Mesh</span><span class="pun">(</span><span class="pln">planeGeo</span><span class="pun">,</span><span class="pln"> planeMat</span><span class="pun">);</span><span class="pln">
  plane</span><span class="pun">.</span><span class="pln">rotation</span><span class="pun">.</span><span class="pln">x </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="typ">Math</span><span class="pun">.</span><span class="pln">PI</span><span class="pun">/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
  plane</span><span class="pun">.</span><span class="pln">position</span><span class="pun">.</span><span class="pln">y </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">25</span><span class="pun">;</span><span class="pln">
  plane</span><span class="pun">.</span><span class="pln">receiveShadow </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
  scene</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">plane</span><span class="pun">);</span></pre>
    <p>And make the cube spin</p>
    <pre class="prettyprint"><span class="pln">  litCube</span><span class="pun">.</span><span class="pln">position</span><span class="pun">.</span><span class="pln">x </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">cos</span><span class="pun">(</span><span class="pln">t</span><span class="pun">/</span><span class="lit">600</span><span class="pun">)*</span><span class="lit">85</span><span class="pun">;</span><span class="pln">
  litCube</span><span class="pun">.</span><span class="pln">position</span><span class="pun">.</span><span class="pln">y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">60</span><span class="pun">-</span><span class="typ">Math</span><span class="pun">.</span><span class="pln">sin</span><span class="pun">(</span><span class="pln">t</span><span class="pun">/</span><span class="lit">900</span><span class="pun">)*</span><span class="lit">25</span><span class="pun">;</span><span class="pln">
  litCube</span><span class="pun">.</span><span class="pln">position</span><span class="pun">.</span><span class="pln">z </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">sin</span><span class="pun">(</span><span class="pln">t</span><span class="pun">/</span><span class="lit">600</span><span class="pun">)*</span><span class="lit">85</span><span class="pun">;</span><span class="pln">
  litCube</span><span class="pun">.</span><span class="pln">rotation</span><span class="pun">.</span><span class="pln">x </span><span class="pun">=</span><span class="pln"> t</span><span class="pun">/</span><span class="lit">500</span><span class="pun">;</span><span class="pln">
  litCube</span><span class="pun">.</span><span class="pln">rotation</span><span class="pun">.</span><span class="pln">y </span><span class="pun">=</span><span class="pln"> t</span><span class="pun">/</span><span class="lit">800</span><span class="pun">;</span></pre>
        </section>

        <section>
          <iframe src="http://gdd11-webgl.appspot.com/three/three_5.html" width="1200" height="600"></iframe>
        </section>

        <section>
          <h3>Lighting recap</h3>
    <p>Set mesh material to <code>new THREE.MeshLambertMaterial</code> or <code>new THREE.MeshPhongMaterial</code></p>
    <p>Create a light <code>new THREE.SpotLight(color)</code></p>
    <p>Add the light to the scene <code>scene.add(light)</code></p>
    <p>Turn on shadows if you need them</p>
    <pre class="prettyprint"><span class="pln">      scene</span><span class="pun">.</span><span class="pln">shadowMapEnabled </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
      light</span><span class="pun">.</span><span class="pln">castShadow </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
      </span><span class="kwd">object</span><span class="pun">.</span><span class="pln">castShadow </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
      </span><span class="kwd">object</span><span class="pun">.</span><span class="pln">receiveShadow </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></pre>
        </section>

        <section>
          <h2>Useful uses</h2>
        </section>

        <section>
          <h3>Bar graph</h3>
    <pre class="prettyprint"><span class="pln">      </span><span class="kwd">var</span><span class="pln"> grid </span><span class="pun">=</span><span class="pln"> </span><span class="com">/* 2D Array */</span><span class="pln">
      </span><span class="kwd">var</span><span class="pln"> barGraph </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">Object3D</span><span class="pun">();</span><span class="pln">
      scene</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">barGraph</span><span class="pun">);</span><span class="pln">

      </span><span class="kwd">var</span><span class="pln"> max </span><span class="pun">=</span><span class="pln"> </span><span class="com">/* Grid max value */</span><span class="pln">
      </span><span class="kwd">var</span><span class="pln"> mat </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">MeshLambertMaterial</span><span class="pun">({</span><span class="pln">color</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0xFFAA55</span><span class="pun">});</span><span class="pln">
      </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> j</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">&lt;</span><span class="pln">grid</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">grid</span><span class="pun">[</span><span class="pln">j</span><span class="pun">].</span><span class="pln">length</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
          </span><span class="kwd">var</span><span class="pln"> barHeight </span><span class="pun">=</span><span class="pln"> grid</span><span class="pun">[</span><span class="pln">j</span><span class="pun">][</span><span class="pln">i</span><span class="pun">]/</span><span class="pln">max </span><span class="pun">*</span><span class="pln"> </span><span class="lit">80</span><span class="pun">;</span><span class="pln">
          </span><span class="kwd">var</span><span class="pln"> geo </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">CubeGeometry</span><span class="pun">(</span><span class="lit">8</span><span class="pun">,</span><span class="pln"> barHeight</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">);</span><span class="pln">
          </span><span class="kwd">var</span><span class="pln"> mesh </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">Mesh</span><span class="pun">(</span><span class="pln">geo</span><span class="pun">,</span><span class="pln"> mat</span><span class="pun">);</span><span class="pln">
          mesh</span><span class="pun">.</span><span class="pln">position</span><span class="pun">.</span><span class="pln">x </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i</span><span class="pun">-</span><span class="pln">grid</span><span class="pun">[</span><span class="pln">j</span><span class="pun">].</span><span class="pln">length</span><span class="pun">/</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">16</span><span class="pun">;</span><span class="pln">
          mesh</span><span class="pun">.</span><span class="pln">position</span><span class="pun">.</span><span class="pln">y </span><span class="pun">=</span><span class="pln"> barHeight</span><span class="pun">/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
          mesh</span><span class="pun">.</span><span class="pln">position</span><span class="pun">.</span><span class="pln">z </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-(</span><span class="pln">j</span><span class="pun">-</span><span class="pln">grid</span><span class="pun">.</span><span class="pln">length</span><span class="pun">/</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">16</span><span class="pun">;</span><span class="pln">
          mesh</span><span class="pun">.</span><span class="pln">castShadow </span><span class="pun">=</span><span class="pln"> mesh</span><span class="pun">.</span><span class="pln">receiveShadow </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
          barGraph</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">mesh</span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
      </span><span class="pun">}</span></pre>
        </section>

        <section>
          <h3>Bar graph in action</h3>
          <iframe src="http://gdd11-webgl.appspot.com/three/three_7.html" width="1200" height="600"></iframe>
        </section>

        <section>
          <h3>Scatter plot</h3>
    <pre class="prettyprint"><span class="kwd">var</span><span class="pln"> scatterPlot </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">Object3D</span><span class="pun">();</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> mat </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">ParticleBasicMaterial</span><span class="pun">(</span><span class="pln">
  </span><span class="pun">{</span><span class="pln">vertexColors</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1.5</span><span class="pun">});</span><span class="pln">

</span><span class="kwd">var</span><span class="pln"> pointCount </span><span class="pun">=</span><span class="pln"> </span><span class="lit">10000</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> pointGeo </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">Geometry</span><span class="pun">();</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">pointCount</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">var</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">random</span><span class="pun">()</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">50</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">var</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> x</span><span class="pun">*</span><span class="lit">0.8</span><span class="pun">+</span><span class="typ">Math</span><span class="pun">.</span><span class="pln">random</span><span class="pun">()</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">20</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">10</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">var</span><span class="pln"> z </span><span class="pun">=</span><span class="pln"> x</span><span class="pun">*</span><span class="lit">0.7</span><span class="pun">+</span><span class="typ">Math</span><span class="pun">.</span><span class="pln">random</span><span class="pun">()</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">30</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">15</span><span class="pun">;</span><span class="pln">
  pointGeo</span><span class="pun">.</span><span class="pln">vertices</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">Vertex</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">Vector3</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln">y</span><span class="pun">,</span><span class="pln">z</span><span class="pun">)));</span><span class="pln">
  pointGeo</span><span class="pun">.</span><span class="pln">colors</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">Color</span><span class="pun">().</span><span class="pln">setHSV</span><span class="pun">(</span><span class="pln">
    </span><span class="pun">(</span><span class="pln">x</span><span class="pun">+</span><span class="lit">50</span><span class="pun">)/</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="pln">z</span><span class="pun">+</span><span class="lit">50</span><span class="pun">)/</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="pln">y</span><span class="pun">+</span><span class="lit">50</span><span class="pun">)/</span><span class="lit">100</span><span class="pun">));</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> points </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">ParticleSystem</span><span class="pun">(</span><span class="pln">pointGeo</span><span class="pun">,</span><span class="pln"> mat</span><span class="pun">);</span><span class="pln">
scatterPlot</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">points</span><span class="pun">);</span><span class="pln">
scene</span><span class="pun">.</span><span class="pln">fog </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">FogExp2</span><span class="pun">(</span><span class="lit">0xFFFFFF</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0035</span><span class="pun">);</span></pre>
        </section>

        <section>
          <h3>Scatter plot in action</h3>
          <iframe src="http://gdd11-webgl.appspot.com/three/three_8.html" width="1200" height="600"></iframe>
        </section>

        <section>
          <h2>GUI controls</h2>
        </section>

        <section>
          <h3>DAT.GUI controls</h3>
    <pre class="prettyprint"><span class="pln">      </span><span class="kwd">var</span><span class="pln"> gui </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> DAT</span><span class="pun">.</span><span class="pln">GUI</span><span class="pun">();</span><span class="pln">
      gui</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">cube</span><span class="pun">.</span><span class="pln">scale</span><span class="pun">,</span><span class="pln"> </span><span class="str">'x'</span><span class="pun">).</span><span class="pln">min</span><span class="pun">(</span><span class="lit">0.1</span><span class="pun">).</span><span class="pln">max</span><span class="pun">(</span><span class="lit">10</span><span class="pun">).</span><span class="pln">step</span><span class="pun">(</span><span class="lit">0.1</span><span class="pun">);</span><span class="pln">
      gui</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">cube</span><span class="pun">.</span><span class="pln">scale</span><span class="pun">,</span><span class="pln"> </span><span class="str">'y'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.1</span><span class="pun">);</span><span class="pln">
      gui</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">cube</span><span class="pun">.</span><span class="pln">scale</span><span class="pun">,</span><span class="pln"> </span><span class="str">'z'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.1</span><span class="pun">);</span></pre>
    <p><a href="http://code.google.com/p/dat-gui">code.google.com/p/dat-gui</a></p>
        </section>

        <section>
          <h3>Scalable cube</h3>
          <iframe src="http://gdd11-webgl.appspot.com/three/three_11.html" width="1200" height="600"></iframe>
        </section>

        <section>
          <h3>Control selected object</h3>
    <pre class="prettyprint"><span class="kwd">var</span><span class="pln"> controller </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">Object3D</span><span class="pun">();</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> gui </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> DAT</span><span class="pun">.</span><span class="pln">GUI</span><span class="pun">({</span><span class="pln">width</span><span class="pun">:</span><span class="pln"> </span><span class="lit">160</span><span class="pun">});</span><span class="pln">

controller</span><span class="pun">.</span><span class="pln">setCurrent </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">current</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">current </span><span class="pun">=</span><span class="pln"> current</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">x</span><span class="pun">.</span><span class="pln">setValue</span><span class="pun">(</span><span class="pln">current</span><span class="pun">.</span><span class="pln">position</span><span class="pun">.</span><span class="pln">x</span><span class="pun">);</span><span class="pln">
  </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">y</span><span class="pun">.</span><span class="pln">setValue</span><span class="pun">(</span><span class="pln">current</span><span class="pun">.</span><span class="pln">position</span><span class="pun">.</span><span class="pln">y</span><span class="pun">);</span><span class="pln">
  </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">z</span><span class="pun">.</span><span class="pln">setValue</span><span class="pun">(</span><span class="pln">current</span><span class="pun">.</span><span class="pln">position</span><span class="pun">.</span><span class="pln">z</span><span class="pun">);</span><span class="pln">
</span><span class="pun">};</span><span class="pln">
      
controller</span><span class="pun">.</span><span class="pln">x </span><span class="pun">=</span><span class="pln"> gui</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">position</span><span class="pun">,</span><span class="pln"> </span><span class="str">'x'</span><span class="pun">).</span><span class="pln">onChange</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">(</span><span class="pln">v</span><span class="pun">){</span><span class="pln">
  controller</span><span class="pun">.</span><span class="pln">current</span><span class="pun">.</span><span class="pln">position</span><span class="pun">.</span><span class="pln">x </span><span class="pun">=</span><span class="pln"> v</span><span class="pun">;</span><span class="pln">
</span><span class="pun">});</span><span class="pln">
</span><span class="com">// etc.</span></pre>
        </section>

        <section>
          <h3>How to select?</h3>
    <p>Project a ray into the scene and find intersecting objects.</p>
    <pre class="prettyprint"><span class="kwd">var</span><span class="pln"> projector </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">Projector</span><span class="pun">();</span><span class="pln">
window</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'mousedown'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ev</span><span class="pun">){</span><span class="pln">
  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ev</span><span class="pun">.</span><span class="pln">target </span><span class="pun">==</span><span class="pln"> renderer</span><span class="pun">.</span><span class="pln">domElement</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">var</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> ev</span><span class="pun">.</span><span class="pln">clientX</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">var</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> ev</span><span class="pun">.</span><span class="pln">clientY</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">var</span><span class="pln"> v </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">Vector3</span><span class="pun">((</span><span class="pln">x</span><span class="pun">/</span><span class="pln">width</span><span class="pun">)*</span><span class="lit">2</span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-(</span><span class="pln">y</span><span class="pun">/</span><span class="pln">height</span><span class="pun">)*</span><span class="lit">2</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.5</span><span class="pun">);</span><span class="pln">
    projector</span><span class="pun">.</span><span class="pln">unprojectVector</span><span class="pun">(</span><span class="pln">v</span><span class="pun">,</span><span class="pln"> camera</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">var</span><span class="pln"> ray </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">Ray</span><span class="pun">(</span><span class="pln">camera</span><span class="pun">.</span><span class="pln">position</span><span class="pun">,</span><span class="pln"> 
                            v</span><span class="pun">.</span><span class="pln">subSelf</span><span class="pun">(</span><span class="pln">camera</span><span class="pun">.</span><span class="pln">position</span><span class="pun">).</span><span class="pln">normalize</span><span class="pun">());</span><span class="pln">
    </span><span class="kwd">var</span><span class="pln"> intersects </span><span class="pun">=</span><span class="pln"> ray</span><span class="pun">.</span><span class="pln">intersectObjects</span><span class="pun">(</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">objects</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">intersects</span><span class="pun">.</span><span class="pln">length </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      controller</span><span class="pun">.</span><span class="pln">setCurrent</span><span class="pun">(</span><span class="pln">intersects</span><span class="pun">[</span><span class="lit">0</span><span class="pun">].</span><span class="kwd">object</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">},</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">);</span></pre>
        </section>

        <section>
          <iframe src="http://gdd11-webgl.appspot.com/three/three_12.html" width="1200" height="600"></iframe>
        </section>

        <section>
          <a href="http://outburstgame.com/" target="_blank"><h1>Outburst</h1></a>
          <h4>3d - shooter - multiplayer - realtime</h4>
        </section>

        <section>
          <h2>Models</h2>
          <p><img src="images/robot-model.png" /></p>
          <ul>
            <li><a href="https://github.com/aranja/Outburst/blob/master/public/game/models/sheep.js" target="_blank">Sheep json</a></li>
            <li><a href="https://github.com/alteredq/three.js/tree/master/utils/exporters" target="_blank">Exporters</a></li>
          </ul>
        </section>

        <section>
          <h1>Resources</h1>
          <ul>
            <li><a href="http://threejs.org/examples/">Three.js examples</a></li>
            <li><a href="http://threejs.org/docs/">Three.js docs</a></li>
            <li><a href="http://learningwebgl.com/blog/?page_id=1217">Learning WebGL</a></li>
            <li><a href="http://alteredqualia.com/">AlteredQualia</a></li>
            <li><a href="http://www.chromeexperiments.com/webgl">Chrome Experiments</a></li>
            <li><a href="http://dev.opera.com/articles/view/an-introduction-to-webgl/">Introduction to WebGL</a></li>
          </ul>
        </section>

      </div>

    </div>

    <script src="../reveal.js/lib/js/head.min.js"></script>
    <script src="../reveal.js/js/reveal.min.js"></script>

    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: false,
        progress: true,
        history: true,
        center: true,
        width: 1280,
        height: 800,

        theme: "sky", // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: '../reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: '../reveal.js/plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: '../reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: '../reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: '../reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: '../reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
          // { src: '../reveal.js/plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });

    </script>

  </body>
</html>
